{% extends "shop/base.html" %}
{% load static %}

{% block title %}
  {{ product.name }}
{% endblock %}

{% block content %}
  <div class="product-detail">
    <img src="{% if product.image %}{{ product.image.url }}{% else %}{% static "img/no_image.png" %}{% endif %}">
    <h1>{{ product.name }}</h1>
    <h2>
      <a href="{{ product.category.get_absolute_url }}">
        {{ product.category }}
      </a>
    </h2>
    <p class="price">${{ product.price }}</p>
    <form action="{% url "cart:cart_add" product.id %}" method="post">
      {% csrf_token %}
      {{ cart_product_form.quantity.label_tag }} {{ cart_product_form.quantity }}
      {% if cart_product_form.fields.size %}
        {{ cart_product_form.size.label_tag }} {{ cart_product_form.size }}
      {% endif %}
      <input type="submit" value="Add to cart">
    </form>
    {{ product.description|linebreaks }}

    {% if recommended_products %}
    <div class="recommendations-wrapper my-5">
      <h3 class="recommendations-title">You might also like</h3>
      <div class="recommendations-scroll">
        {% for p in recommended_products %}
        <div class="recommendation-card">
          <a href="{{ p.get_absolute_url }}">
            <img src="{% if p.image %}{{ p.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}" alt="{{ p.name }}">
          </a>
          <p class="product-name"><a href="{{ p.get_absolute_url }}">{{ p.name }}</a></p>
          <p class="product-price">from ${{ p.price }}</p>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>

  <!-- Footer -->
  <footer style="background-color: #1a1a1a;" class="text-light pt-5 pb-4 px-3 rounded-top-5 shadow-lg mt-5">
    <div class="container">
      <h2 class="fw-bold mb-4 fs-3 fs-sm-2">
        Dive Into Worlds Beyond<br />
        <span class="fw-normal text-secondary fs-5">Comics & Merch for Every <strong class="text-white">True Fan.</strong></span>
      </h2>

      <hr class="border-secondary mb-5" />

      <div class="row">
        <div class="col-md-3 mb-4">
          <h5 class="fw-bold fs-5">OSHEN COMICS</h5>
          <p class="text-secondary fs-6">Explore original stories, characters, and official merchandise.</p>
        </div>

        <div class="col-md-3 mb-4">
          <h6 class="fw-semibold fs-6">Support</h6>
          <ul class="list-unstyled fs-6">
            <li><a href="https://wa.me/254741881921" class="text-secondary text-decoration-none">Contact Support</a></li>
            <li><a href="{% url 'orders:order_history' %}" class="text-secondary text-decoration-none">Shipping Info</a></li>
            <li><a href="#" class="text-secondary text-decoration-none">Privacy Policy</a></li>
            <li><a href="#" class="text-secondary text-decoration-none">Terms of Service</a></li>
          </ul>
        </div>

        <div class="col-md-2">
          <h6 class="fw-semibold fs-6">Stay in the Loop</h6>
          <form class="d-flex mt-2 flex-column flex-sm-row gap-2">
            <input
              type="email"
              class="form-control bg-dark text-white border-secondary fs-5"
              placeholder="Enter your E-mail"
              style="min-height: 56px; padding: 0.75rem 1rem; width: 100%;"
              aria-label="Email"
            />
            <button
              class="btn btn-outline-info px-4 fs-5"
              type="submit"
              style="min-height: 56px; width: 100%;"
            >
              Subscribe
            </button>
          </form>
          <small class="text-secondary d-block mt-2 fs-6">Get notified about new comic drops & exclusive merch.</small>
        </div>
      </div>

      <hr class="border-secondary my-4" />

      <div class="d-flex justify-content-between align-items-center pt-2 flex-wrap">
        <p class="mb-0 small text-decoration-none fs-6">OSHEN COMICS 2025 Â©. All rights reserved</p>
        <div class="d-flex align-items-center mt-2 mt-md-0 fs-4">
          <a href="https://www.instagram.com/_.shenlee?igsh=a3B0cnh1d2pqenp2&utm_source=qr" class="text-light me-3"><i class="bi bi-instagram"></i></a>
          <a href="https://www.linkedin.com/in/shen-lee-osialai-089403251/" class="text-light me-4"><i class="bi bi-linkedin"></i></a>
          <img src="https://upload.wikimedia.org/wikipedia/commons/b/ba/Stripe_Logo%2C_revised_2016.svg" alt="Stripe" style="height:32px; margin-right: 15px;" />
          <img src="https://upload.wikimedia.org/wikipedia/commons/1/15/M-PESA_LOGO-01.svg" alt="M-Pesa" style="height:32px;" />
        </div>
      </div>
    </div>
  </footer>
{% endblock %}
